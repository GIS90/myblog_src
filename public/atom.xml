<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PyGo²</title>
  
  <subtitle>一个爱&lt;font size=&quot;5&quot; color=&quot;#BF0060&quot;&gt;老婆&lt;/font&gt;的&lt;font size=&quot;5&quot; color=&quot;#FF4500&quot;&gt;Python&lt;/font&gt;程序猿。。。。。。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://pygo2.top/"/>
  <updated>2021-11-02T15:08:09.000Z</updated>
  <id>http://pygo2.top/</id>
  
  <author>
    <name>mingliang.gao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Server后端API返回JSON格式说明</title>
    <link href="http://pygo2.top/articles/40461/"/>
    <id>http://pygo2.top/articles/40461/</id>
    <published>2021-11-02T15:08:09.000Z</published>
    <updated>2021-11-02T15:08:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>本人有5年的多的Python后端开发经验，经常与前端开发或者自己写的前端项目进行数据交换，总结一下自己常用的数据交换格式，以及状态码对应的内容。</p><span class="label danger">Linux</span> <span class="label info">Java</span><a id="more"></a><hr><blockquote><p>格式</p></blockquote><p><strong>*JSON**</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;status_id&quot;: 100,</span><br><span class="line">    &quot;status&quot;: &quot;成功&quot;,</span><br><span class="line">    &quot;message&quot;: &quot;请求内容&quot;,</span><br><span class="line">    &quot;data&quot;: [],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>status_id：状态码</li><li>status：状态内容</li><li>message：错误信息</li><li>data：请求的json数据内容</li></ul><blockquote><p>实例</p></blockquote><table><thead><tr><th style="text-align:center">Status_id</th><th style="text-align:left">Status</th><th style="text-align:left">Msg</th><th style="text-align:left">Data</th></tr></thead><tbody><tr><td style="text-align:center">100</td><td style="text-align:left">success</td><td style="text-align:left">请求成功</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">101</td><td style="text-align:left">success</td><td style="text-align:left">请求成功，查询数据为空</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">201</td><td style="text-align:left">failure</td><td style="text-align:left">请求方法错误</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">202</td><td style="text-align:left">failure</td><td style="text-align:left">缺少请求参数</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">203</td><td style="text-align:left">failure</td><td style="text-align:left">请求参数不合法</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">204</td><td style="text-align:left">failure</td><td style="text-align:left">请求参数为必须信息</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">205</td><td style="text-align:left">failure</td><td style="text-align:left">缺少rtx_id信息</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">206</td><td style="text-align:left">failure</td><td style="text-align:left">缺少上传文件</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">207</td><td style="text-align:left">failure</td><td style="text-align:left">文件格式不支持</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">208</td><td style="text-align:left">failure</td><td style="text-align:left">文件内容不符合要求</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">209</td><td style="text-align:left">failure</td><td style="text-align:left">文件行内容有问题</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">210</td><td style="text-align:left">failure</td><td style="text-align:left">文件存储失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">211</td><td style="text-align:left">failure</td><td style="text-align:left">参数特殊要求</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">212</td><td style="text-align:left">failure</td><td style="text-align:left">文件数据已存在</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">213</td><td style="text-align:left">failure</td><td style="text-align:left">文件导出数据为空</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">301</td><td style="text-align:left">failure</td><td style="text-align:left">数据已存在，无需重新建立</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">302</td><td style="text-align:left">failure</td><td style="text-align:left">数据不存在</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">303</td><td style="text-align:left">failure</td><td style="text-align:left">部分数据处理成功</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">304</td><td style="text-align:left">failure</td><td style="text-align:left">数据已删除，无需处理</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">305</td><td style="text-align:left">failure</td><td style="text-align:left">数据已处理，无须二次处理</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">306</td><td style="text-align:left">failure</td><td style="text-align:left">数据已删除，无须二次删除</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">307</td><td style="text-align:left">failure</td><td style="text-align:left">数据处理失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">308</td><td style="text-align:left">failure</td><td style="text-align:left">数据不可用</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">3081</td><td style="text-align:left">failure</td><td style="text-align:left">数据（地址）不可用</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">3082</td><td style="text-align:left">failure</td><td style="text-align:left">数据（姓名）不可用</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">3083</td><td style="text-align:left">failure</td><td style="text-align:left">数据（重量）不可用</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">3084</td><td style="text-align:left">failure</td><td style="text-align:left">数据（电话）不可用</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">309</td><td style="text-align:left">failure</td><td style="text-align:left">数据创建用户与当前更改用户不一致</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">310</td><td style="text-align:left">failure</td><td style="text-align:left">非数据相关人员，禁止更新数据</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">401</td><td style="text-align:left">failure</td><td style="text-align:left">图片格式不支持</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">402</td><td style="text-align:left">failure</td><td style="text-align:left">图片存储失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">403</td><td style="text-align:left">failure</td><td style="text-align:left">文章创建者与提交者不符合</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">450</td><td style="text-align:left">failure</td><td style="text-align:left">数据存储失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">501</td><td style="text-align:left">failure</td><td style="text-align:left">Server发生错误，获取数据失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">601</td><td style="text-align:left">failure</td><td style="text-align:left">HTTP请求接口失败</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">602</td><td style="text-align:left">failure</td><td style="text-align:left">HTTP请求数据为空</td><td style="text-align:left">{}</td></tr><tr><td style="text-align:center">603</td><td style="text-align:left">failure</td><td style="text-align:left">HTTP请求数据不可用</td><td style="text-align:left">{}</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本人有5年的多的Python后端开发经验，经常与前端开发或者自己写的前端项目进行数据交换，总结一下自己常用的数据交换格式，以及状态码对应的内容。&lt;/p&gt;
&lt;span class=&quot;label danger&quot;&gt;Linux&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;Java&lt;/span&gt;
    
    </summary>
    
      <category term="服务器" scheme="http://pygo2.top/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="API" scheme="http://pygo2.top/tags/API/"/>
    
      <category term="JSON" scheme="http://pygo2.top/tags/JSON/"/>
    
  </entry>
  
  <entry>
    <title>Vue第三方组件</title>
    <link href="http://pygo2.top/articles/5638/"/>
    <id>http://pygo2.top/articles/5638/</id>
    <published>2021-11-02T14:43:52.000Z</published>
    <updated>2021-11-02T14:43:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_vue.jpeg" alt></p><h4 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h4><div class="note primary">            <p>记录学习VUE过程中用到的第三方组件。</p>          </div><span class="label danger">VUE</span> <span class="label info">第三方组件</span><a id="more"></a><hr><p>前端框架出现之后，组件化成为了前端开发的趋势，对于开发者来说，尤其是初学者，直接引用别人封装好的组件，在开发成本、样式上会节省一把时间，记录一下VUE学习过程中使用过的第三方组件。<br>至于，优劣势分析会在日后进行分析。</p><table><thead><tr><th style="text-align:center">ID</th><th style="text-align:center">Name</th><th style="text-align:left">Url</th><th style="text-align:left">DevTeam</th><th style="text-align:left">VUE Support</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">vant</td><td style="text-align:left"><a href="https://vant-contrib.gitee.io/" target="_blank" rel="noopener">https://vant-contrib.gitee.io/</a></td><td style="text-align:left">有赞前端团队</td><td style="text-align:left">Vue2, Vue3</td></tr></tbody></table><font size="5.5" color="red"><strong><em>持续更新中。。。。。。</em></strong></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_vue.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;h4 id=&quot;简述&quot;&gt;&lt;a href=&quot;#简述&quot; class=&quot;headerlink&quot; title=&quot;简述&quot;&gt;&lt;/a&gt;简述&lt;/h4&gt;&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;记录学习VUE过程中用到的第三方组件。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label danger&quot;&gt;VUE&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;第三方组件&lt;/span&gt;
    
    </summary>
    
      <category term="前端" scheme="http://pygo2.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="VUE" scheme="http://pygo2.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>ATOM安装插件的方式</title>
    <link href="http://pygo2.top/articles/10421/"/>
    <id>http://pygo2.top/articles/10421/</id>
    <published>2021-10-24T14:05:31.000Z</published>
    <updated>2021-10-24T14:05:31.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p><strong>ATOM</strong></p></blockquote><div class="note warning">            <p>之前写过一片关于ATOM的快捷键以及相关的一些基础插件，今日再把安装插件的方式记录一下，还是比较简单的。</p>          </div><span class="label primary">ATOM</span> <span class="label success">IDE</span><a id="more"></a><hr><blockquote><p>IDE安装</p></blockquote><p>1.打开Atom-&gt;Perferences，快捷键：command+,<br>2.找到左侧的install菜单，输入你想要安装的Packages插件名/Theme名<br><img src="atom_install1.png" alt></p><blockquote><p>APM命令安装</p></blockquote><p>1.打开terminal控制台<br>2.执行以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查询是否有apm命令</span><br><span class="line">which apm</span><br><span class="line"></span><br><span class="line"># 安装</span><br><span class="line">apm install</span><br><span class="line"></span><br><span class="line"># 查看插件安装列表</span><br><span class="line">apm list</span><br></pre></td></tr></table></figure></p><p>具体的命令查询help，其实大部分安装包的命令都一样，npm、pip等等等，安装install、列表list、卸载uninstall/remove。<br><img src="atom_install2.png" alt></p><blockquote><p>手动安装</p></blockquote><p>上面2种安装解决了大部分安装插件的问题，如果在库中没有，需要手动git项目进行安装，步骤如下：<br>1.进入到atom的插件目录（cd ~/.atom/package），再通过git clone克隆仓库到本地<br>2.cd到插件的目录，执行apm install命令进行插件的安装</p><font size="6.5" color="red">最近有些懈怠了，写写文章、学学习，让自己充实起来，人生需要不断的前进。</font>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;&lt;strong&gt;ATOM&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;note warning&quot;&gt;
            &lt;p&gt;之前写过一片关于ATOM的快捷键以及相关的一些基础插件，今日再把安装插件的方式记录一下，还是比较简单的。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label primary&quot;&gt;ATOM&lt;/span&gt; &lt;span class=&quot;label success&quot;&gt;IDE&lt;/span&gt;
    
    </summary>
    
      <category term="IDE" scheme="http://pygo2.top/categories/IDE/"/>
    
    
      <category term="IDE" scheme="http://pygo2.top/tags/IDE/"/>
    
      <category term="Atom" scheme="http://pygo2.top/tags/Atom/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu-Unable to locate package错误解决办法</title>
    <link href="http://pygo2.top/articles/53363/"/>
    <id>http://pygo2.top/articles/53363/</id>
    <published>2021-10-22T00:50:45.000Z</published>
    <updated>2021-10-22T00:50:45.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note success">            <p>在Windows Terminal上集成了Ubuntu Terminal，安装小火车sl的时候，出现以下的错误：<br><img src="/images/article_ubuntu_error.jpg" alt></p>          </div><span class="label info">Ubuntu</span><a id="more"></a><hr><p>Unable to locate package大概意思就是找不到需要安装的包，执行以下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>这个命令会访问apt配置文件中所有的源，会读取源的软件列表保存在本地。以后使用apt、apt-get命令去install的时候会遍历本机保存的软件列表，所以需要定期对软件列表进行update命令更新源的软件列表。<br>在去执行刚才需要安装的命令。</p><div class="post_cus_note">拓展</div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure><p>执行upgrade命令会把本机安装的packages与上述update更新的软件列表进行比对，如果版本低于软件列表，会进行更新操作。</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note success&quot;&gt;
            &lt;p&gt;在Windows Terminal上集成了Ubuntu Terminal，安装小火车sl的时候，出现以下的错误：&lt;br&gt;&lt;img src=&quot;/images/article_ubuntu_error.jpg&quot; alt&gt;&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label info&quot;&gt;Ubuntu&lt;/span&gt;
    
    </summary>
    
      <category term="服务器" scheme="http://pygo2.top/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="Ubuntu" scheme="http://pygo2.top/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Vue入门系列-VUE全家桶架构图</title>
    <link href="http://pygo2.top/articles/54029/"/>
    <id>http://pygo2.top/articles/54029/</id>
    <published>2021-09-12T05:54:57.000Z</published>
    <updated>2021-09-12T05:54:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_vue.jpeg" alt></p><p>前段时间在慕课网学习了基础的VUE视频，受益匪浅啊，决定把自己从VUE入门的学习过程写一个系列的文章做一个分享，如果学习过程有错误的理解或者有什么记录不对的地方，可以留言进行交流。</p><span class="label primary">VUE</span><a id="more"></a><hr><p><img src="VUE.jpg" alt></p><p>从这个架构图上可以看出，我把VUE分为4个部分，分别是：</p><ul><li>基础环境</li><li>VUE基础知识</li><li>VUE其他</li><li>部署<br>最后一个是要做一个实战，实现todolist的功能，后端代码打算用python3实现API对接。</li></ul><font size="5.5" color="red"><strong><em>持续更新中。。。。。。</em></strong></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_vue.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;前段时间在慕课网学习了基础的VUE视频，受益匪浅啊，决定把自己从VUE入门的学习过程写一个系列的文章做一个分享，如果学习过程有错误的理解或者有什么记录不对的地方，可以留言进行交流。&lt;/p&gt;
&lt;span class=&quot;label primary&quot;&gt;VUE&lt;/span&gt;
    
    </summary>
    
      <category term="前端" scheme="http://pygo2.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="VUE" scheme="http://pygo2.top/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>413 Request Entity Too Large</title>
    <link href="http://pygo2.top/articles/60121/"/>
    <id>http://pygo2.top/articles/60121/</id>
    <published>2021-08-23T14:51:13.000Z</published>
    <updated>2021-08-23T14:51:13.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note primary">            <p>在发布的pyhton web项目上传2M的文件，提示<font color="red" size="4.5">413 Request Entity Too Large</font>，请求实体过大也就是requests的Content-Length过大，记得当时本机开发的时候没有报过这个问题，为何上线就有了，大概率是域名、nginx那的问题。</p>          </div><p><img src="/images/article_nginx413.jpeg" alt></p><span class="label primary">Nginx</span><a id="more"></a><hr><p>确认问题出处之后就好解决，baidu查了一下，是因为nginx的配置问题，找到云服务器nginx的配置：/etc/nginx/nginx.conf<br>在http配置处添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client_max_body_size 100M;</span><br></pre></td></tr></table></figure></p><p>重启nginx，搞定。</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;在发布的pyhton web项目上传2M的文件，提示&lt;font color=&quot;red&quot; size=&quot;4.5&quot;&gt;413 Request Entity Too Large&lt;/font&gt;，请求实体过大也就是requests的Content-Length过大，记得当时本机开发的时候没有报过这个问题，为何上线就有了，大概率是域名、nginx那的问题。&lt;/p&gt;
          &lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/images/article_nginx413.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;span class=&quot;label primary&quot;&gt;Nginx&lt;/span&gt;
    
    </summary>
    
      <category term="工具集" scheme="http://pygo2.top/categories/%E5%B7%A5%E5%85%B7%E9%9B%86/"/>
    
    
      <category term="Nginx" scheme="http://pygo2.top/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>openpyxl写入性能的比较</title>
    <link href="http://pygo2.top/articles/24240/"/>
    <id>http://pygo2.top/articles/24240/</id>
    <published>2021-08-08T03:47:56.000Z</published>
    <updated>2021-08-08T03:47:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><font size="6.5" color="red">简单比较一下openpyxl在行写入与单元格写入性能上的对比。</font></p><p><hr><br><span class="label info">Python</span> <span class="label primary">Excel</span></p><a id="more"></a><hr><blockquote><p>简述</p></blockquote><p>之前一直用xlrd、xlwt处理表格，但是发现限制台，超过了65535就不能读取了，改用openpyxl，了解了一下之后，发现openpyxl可以行写入，测试一下行写入与单元格写入二者的性能。</p><blockquote><p>样本</p></blockquote><p>表格元数据176233行、7列，数据包含字符串类型、数字、时间等常见类型。</p><blockquote><p>试验体</p></blockquote><p>PC：MacOS<br>openpyxl版本：3.0.7</p><blockquote><p>源代码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 读取</span><br><span class="line">reader_workbook = openpyxl.load_workbook(&apos;data/LLBB_GRCKYE1.xlsx&apos;)</span><br><span class="line">sheet = reader_workbook.get_sheet_by_name(reader_workbook.sheetnames[0])</span><br><span class="line">sheet_row = sheet.max_row</span><br><span class="line">sheet_col = sheet.max_column</span><br><span class="line"># ===================================</span><br><span class="line"># 行写入</span><br><span class="line">start1 = datetime.datetime.now()</span><br><span class="line">new_wb = openpyxl.Workbook()</span><br><span class="line">new_sheet = new_wb.create_sheet(title=&apos;Sheet&apos;, index=0)</span><br><span class="line">for row in sheet.values:</span><br><span class="line">    new_sheet.append(row)</span><br><span class="line">new_wb.save(&apos;result/res2.xlsx&apos;)</span><br><span class="line">end1 = datetime.datetime.now()</span><br><span class="line">print((end1-start1).seconds)</span><br><span class="line"># ===================================</span><br><span class="line"># 单元格写入</span><br><span class="line">start2 = datetime.datetime.now()</span><br><span class="line">new_wb = openpyxl.Workbook()</span><br><span class="line">new_sheet = new_wb.create_sheet(title=&apos;Sheet&apos;, index=0)</span><br><span class="line">for row in range(1, sheet_row + 1, 1):</span><br><span class="line">    for col in range(1, sheet_col + 1, 1):</span><br><span class="line">        new_sheet.cell(row=row,</span><br><span class="line">                       column=col,</span><br><span class="line">                       value=sheet.cell(row=row, column=col).value</span><br><span class="line">                       )</span><br><span class="line">new_wb.save(&apos;result/res3.xlsx&apos;)</span><br><span class="line">end2 = datetime.datetime.now()</span><br><span class="line">print((end2-start2).seconds)</span><br></pre></td></tr></table></figure><blockquote><p>比较结果</p></blockquote><p>单位：s</p><table><thead><tr><th style="text-align:center">类别</th><th style="text-align:center">第1次</th><th style="text-align:center">第2次</th><th style="text-align:center">第3次</th><th style="text-align:center">第4次</th><th style="text-align:center">第5次</th><th style="text-align:center">第6次</th><th style="text-align:center">第7次</th><th style="text-align:center">第8次</th><th style="text-align:center">第9次</th><th style="text-align:center">第10次</th><th style="text-align:center">平均值</th></tr></thead><tbody><tr><td style="text-align:center">行</td><td style="text-align:center">25</td><td style="text-align:center">26</td><td style="text-align:center">28</td><td style="text-align:center">29</td><td style="text-align:center">27</td><td style="text-align:center">28</td><td style="text-align:center">27</td><td style="text-align:center">26</td><td style="text-align:center">26</td><td style="text-align:center">26</td><td style="text-align:center">26.8</td></tr><tr><td style="text-align:center">单元格</td><td style="text-align:center">26</td><td style="text-align:center">28</td><td style="text-align:center">30</td><td style="text-align:center">28</td><td style="text-align:center">30</td><td style="text-align:center">29</td><td style="text-align:center">27</td><td style="text-align:center">27</td><td style="text-align:center">26</td><td style="text-align:center">29</td><td style="text-align:center">28.0</td></tr></tbody></table><blockquote><p>总结</p></blockquote><p>总体来说，大数据量可以看出行写入的速率较快，如果是数据量在几万行，性能都差不多，而且行写入代码也比较简单。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;font size=&quot;6.5&quot; color=&quot;red&quot;&gt;简单比较一下openpyxl在行写入与单元格写入性能上的对比。&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;&lt;hr&gt;&lt;br&gt;&lt;span class=&quot;label info&quot;&gt;Python&lt;/span&gt; &lt;span class=&quot;label primary&quot;&gt;Excel&lt;/span&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://pygo2.top/categories/Python/"/>
    
    
      <category term="Python" scheme="http://pygo2.top/tags/Python/"/>
    
      <category term="Excel" scheme="http://pygo2.top/tags/Excel/"/>
    
  </entry>
  
  <entry>
    <title>解决Python处理Excel65535的问题</title>
    <link href="http://pygo2.top/articles/26307/"/>
    <id>http://pygo2.top/articles/26307/</id>
    <published>2021-08-05T14:31:28.000Z</published>
    <updated>2021-08-05T14:31:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_python_excel.jpeg" alt></p><div class="note primary">            <blockquote><p>问题描述</p></blockquote><p>使用Python去处理表格的时候，居然报错，提示为：<br>undefined</p>          </div><span class="label info">Python</span><a id="more"></a><hr><p>基于xlrd、xlwt进行Excel的处理，其包中对单个Sheet限制最大行数为65535，当读写数据超出这个范围就会出现如上错误。</p><blockquote><p>解决方案</p></blockquote><p>可以使用openpyxl包，其最大行数为1048576，存储的文件类型为xlsx，但是弊端就是不能读取xls老的Excel格式文件。<br>对于这个，我在项目中想了一个解决方案，判断是xls格式就用xlrd、xlwt包的方法；xlsx就用openpyxl。<br>如果是xls并且行数超过65536，让用户上传xlsx格式的文件，网上有xls、xlsx格式的转换，有需要的可以找找。</p><p>如果使用openpyxl读取.xls文件，报错：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">raise InvalidFileException(msg)</span><br><span class="line">openpyxl.utils.exceptions.InvalidFileException: openpyxl does not support the old .xls file format,</span><br><span class="line">please use xlrd to read this file, or convert it to the more recent .xlsx file format.</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_python_excel.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;div class=&quot;note primary&quot;&gt;
            &lt;blockquote&gt;&lt;p&gt;问题描述&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;使用Python去处理表格的时候，居然报错，提示为：&lt;br&gt;undefined&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label info&quot;&gt;Python&lt;/span&gt;
    
    </summary>
    
      <category term="Python" scheme="http://pygo2.top/categories/Python/"/>
    
    
      <category term="Python" scheme="http://pygo2.top/tags/Python/"/>
    
      <category term="Excel" scheme="http://pygo2.top/tags/Excel/"/>
    
  </entry>
  
  <entry>
    <title>Bootstrap的动态icon</title>
    <link href="http://pygo2.top/articles/63837/"/>
    <id>http://pygo2.top/articles/63837/</id>
    <published>2021-08-01T02:07:44.000Z</published>
    <updated>2021-08-01T02:07:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_bootstrap.jpeg" alt></p><div class="note primary">            <p>Bootstrap图标使用的是Font Awesome，加上基本的class可以产生动画效果，让页面看起来更加酷炫。</p>          </div><span class="label primary">Bootstrap</span> <span class="label info">icon</span><a id="more"></a><hr><p>实现代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;fa-5x&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-refresh fa-spin&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-cog fa-spin&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-spinner fa-pulse&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-refresh fa-pulse&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-cog fa-pulse&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-spinner fa-rotate-90&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-refresh fa-rotate-90&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-cog fa-rotate-90&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><ul><li>fa-spin：让icon图标不停的动态旋转</li><li>fa-pulse：图标以八步为周期进行旋转，比较适合表示刷新、加载等功能的图标，如.fa-spinner、.fa-refresh、.fa-cog等</li><li>fa-rotate-xx：图标以某个角度进行选择</li><li>fa-flip-horizontal：水平翻转</li><li>fa-flip-vertical：垂直翻转</li><li>fa-3x：图标大小的设置，有fa-x、fa-2x、fa-3x，想要多大有多大，使用默认大小fa-x居多</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_bootstrap.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;Bootstrap图标使用的是Font Awesome，加上基本的class可以产生动画效果，让页面看起来更加酷炫。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label primary&quot;&gt;Bootstrap&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;icon&lt;/span&gt;
    
    </summary>
    
      <category term="Bootstrap" scheme="http://pygo2.top/categories/Bootstrap/"/>
    
    
      <category term="Bootstrap" scheme="http://pygo2.top/tags/Bootstrap/"/>
    
  </entry>
  
  <entry>
    <title>JAVA的Error:loading:xxxx\jvm.dll问题解决</title>
    <link href="http://pygo2.top/articles/35460/"/>
    <id>http://pygo2.top/articles/35460/</id>
    <published>2021-07-18T03:22:52.000Z</published>
    <updated>2021-07-18T03:22:52.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>问题描述：</p></blockquote><p><img src="/images/article_javaerrror.jpg" alt></p><p>在服务器执行java环境的时候，发现报以上的错误：<font color="red" size="5"><strong><em>Error: loading: xxxx\jvm.dll</em></strong></font>，记得在服务器坏之前还是好的，修复了之后就变成这样了，不管咋样，修复好才是王道。</p><a id="more"></a><hr><blockquote><p>解决方案</p></blockquote><p>直接修改path环境变量，把<font color="red" size="5"><strong><em>%JAVA_HOME%/bin;%JAVA_HOME%/jre/bin;</em></strong></font>放到path变量的最前面。</p><blockquote><p>解决过程</p></blockquote><ul><li>首先，报<strong><em>Error: loading: xxxx\jvm.dll</em></strong>这个文件的问题，正常java的环境应该回去找安装好的jvm.dll文件。</li><li>于是，我把这个对应指定的文件重命名，发现报另一个的错误：<strong><em>Error: missing <code>server‘ JVM at</code>XXXXXbin\server\jvm.dll‘.</em></strong></li><li>初步设想应该是JAVA环境配置出了问题，于是把JAVA环境重新配置了一边，好了。</li></ul><blockquote><p>原因</p></blockquote><p>应该是JAVA去找jvm.dll的时候，从PATH的顺序去找，把JAVA配置的路径放在最前面，先从JAVA环境找起。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;问题描述：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/images/article_javaerrror.jpg&quot; alt&gt;&lt;/p&gt;
&lt;p&gt;在服务器执行java环境的时候，发现报以上的错误：&lt;font color=&quot;red&quot; size=&quot;5&quot;&gt;&lt;strong&gt;&lt;em&gt;Error: loading: xxxx\jvm.dll&lt;/em&gt;&lt;/strong&gt;&lt;/font&gt;，记得在服务器坏之前还是好的，修复了之后就变成这样了，不管咋样，修复好才是王道。&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://pygo2.top/categories/Java/"/>
    
    
      <category term="ERROR集" scheme="http://pygo2.top/tags/ERROR%E9%9B%86/"/>
    
      <category term="Java" scheme="http://pygo2.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Windows系统服务器之间的大文件互传</title>
    <link href="http://pygo2.top/articles/555/"/>
    <id>http://pygo2.top/articles/555/</id>
    <published>2021-07-17T12:53:58.000Z</published>
    <updated>2021-07-17T12:53:58.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h4><div class="note warning">            <p>在服务器之间经常有文件要进行传输，而且很多情况都是10G以上的大文件，服务器操作系统主流为Windows、Linux、Unix，今日用到了两台Windows服务器之间进行大文件传输，总结一下，分享出来。</p>          </div><span class="label default">服务器</span> <span class="label info">文件传输</span> <span class="label primary">Windows</span><a id="more"></a><hr><h4 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h4><table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">ip</th><th style="text-align:center">name</th><th>Version</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">16.19.209.67</td><td style="text-align:center">Windows</td><td>Windows Server2008 R2</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">16.19.209.100</td><td style="text-align:center">Windows</td><td>Windows Server2008 R2</td></tr></tbody></table><p>两台服务器为内网连同的两台机器。</p><h4 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h4><blockquote><p>文件共享</p></blockquote><ul><li>文件夹开启高级共享，右键-&gt;属性-&gt;共享-&gt;高级共享</li><li>使用MSTSC进行连接，快捷键WIN+R，输入MSTSC，输入相关远程电脑的连接信息</li><li>连接之后再另一台电脑的计算机顶部地址栏输入共享服务器的ip</li><li>选择共享的文件夹，输入对应的账号、密码</li><li>复制到本地</li></ul><p><img src="1.png" alt></p><blockquote><p>xcopy</p></blockquote><p>Win系统自带的命令，启用CMD控制台。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 格式</span><br><span class="line">net use \\IP地址 密码/user:账户</span><br><span class="line"># 示例</span><br><span class="line">net use \\16.19.209.100 Aqwe123/user:Administrator</span><br><span class="line"></span><br><span class="line">xcopy /e E:\BACKUP_MZLPAS\*.* \\16.19.209.100\E$\BACKUP_MZLPAS\ /y</span><br><span class="line">/y 表示直接覆盖原来的文件，不需要询问</span><br><span class="line">/e 表示复制文件夹下所有文件及文件夹</span><br></pre></td></tr></table></figure></p><p>前提是这个文件夹开启共享。</p><blockquote><p>python</p></blockquote><p>服务器具有python环境，利用python命令开启一个web服务，连接方进行下载。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># python2</span><br><span class="line">python -m SimpleHTTPServer XXXX</span><br></pre></td></tr></table></figure></p><p>其中，XXXX为端口。</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;简述&quot;&gt;&lt;a href=&quot;#简述&quot; class=&quot;headerlink&quot; title=&quot;简述&quot;&gt;&lt;/a&gt;简述&lt;/h4&gt;&lt;div class=&quot;note warning&quot;&gt;
            &lt;p&gt;在服务器之间经常有文件要进行传输，而且很多情况都是10G以上的大文件，服务器操作系统主流为Windows、Linux、Unix，今日用到了两台Windows服务器之间进行大文件传输，总结一下，分享出来。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label default&quot;&gt;服务器&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;文件传输&lt;/span&gt; &lt;span class=&quot;label primary&quot;&gt;Windows&lt;/span&gt;
    
    </summary>
    
      <category term="服务器" scheme="http://pygo2.top/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="文件传输" scheme="http://pygo2.top/tags/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/"/>
    
  </entry>
  
  <entry>
    <title>DB2报错：SQLCODE=-668, SQLSTATE=57016</title>
    <link href="http://pygo2.top/articles/34462/"/>
    <id>http://pygo2.top/articles/34462/</id>
    <published>2021-07-14T12:55:15.000Z</published>
    <updated>2021-07-14T12:55:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_db2.jpg" alt></p><div class="note primary">            <p>今日跑存储过程，很简单的一个存储过程，从来没包错过，居然报错了，提示<font color="red" size="5"><strong><em>SQLCODE：-20244</em></strong></font>，网上查资料发现没有这个<strong><em>SQLCODE</em></strong>，于是一个表一个表的<strong><em>SELECT</em></strong>，发现其中有个表报错：SQLCODE=-668, SQLSTATE=57016</p>          </div><span class="label info">DB2</span> <span class="label default">SQLCODE</span><a id="more"></a><hr><p>当存储过程出现：SQLCODE=-668, SQLSTATE=57016，说明表处于“暂挂状态”，需要load + reorg处理下就可以了。</p><blockquote><p>1.查询表的状态，DB2 CMD执行：db2 load query table pas.jxdx_dkzh_bf</p></blockquote><p><img src="668.png" alt><br>这个错误是：表处于”装入暂挂”状态。</p><blockquote><p>2.执行以下对应的命令用来解除暂挂状态。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 load from /dev/null of del terminate into pas.jxdx_dkzh_bf</span><br></pre></td></tr></table></figure><p>win、linux都适用。</p><blockquote><p>3.然后</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 reorg table pas.jxdx_dkzh_bf</span><br></pre></td></tr></table></figure><blockquote><p>4.测试select语句，如果可以了就可以执行存储过程了。</p></blockquote><div class="post_cus_note">注意要点</div><ul><li>table后面跟的表名格式：策略.表名</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_db2.jpg&quot; alt&gt;&lt;/p&gt;
&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;今日跑存储过程，很简单的一个存储过程，从来没包错过，居然报错了，提示&lt;font color=&quot;red&quot; size=&quot;5&quot;&gt;&lt;strong&gt;&lt;em&gt;SQLCODE：-20244&lt;/em&gt;&lt;/strong&gt;&lt;/font&gt;，网上查资料发现没有这个&lt;strong&gt;&lt;em&gt;SQLCODE&lt;/em&gt;&lt;/strong&gt;，于是一个表一个表的&lt;strong&gt;&lt;em&gt;SELECT&lt;/em&gt;&lt;/strong&gt;，发现其中有个表报错：SQLCODE=-668, SQLSTATE=57016&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label info&quot;&gt;DB2&lt;/span&gt; &lt;span class=&quot;label default&quot;&gt;SQLCODE&lt;/span&gt;
    
    </summary>
    
      <category term="数据库" scheme="http://pygo2.top/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="DB2" scheme="http://pygo2.top/tags/DB2/"/>
    
  </entry>
  
  <entry>
    <title>PDF转WORD</title>
    <link href="http://pygo2.top/articles/28829/"/>
    <id>http://pygo2.top/articles/28829/</id>
    <published>2021-07-04T16:44:39.000Z</published>
    <updated>2021-07-04T16:44:39.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><div class="note default">            <p>利用业余时间参加了公司的创新项目活动，里面有一个PDF转WORD的功能，分享出来。主要使用了python3版本的pdf2docx包，包的使用也很简单，基于基础功能写写逻辑、封装下页面就可以做出web功能了。</p>          </div><span class="label info">Python实战</span> <span class="label default">PDF转WORD</span><a id="more"></a><hr><h4 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h4><table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">name</th><th style="text-align:center">Version</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Python</td><td style="text-align:center">3.7</td></tr></tbody></table><p>pdf2docx只支持python3。</p><h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docx==0.2.4</span><br><span class="line">fitz==0.0.1.dev2</span><br><span class="line">fonttools==4.24.4</span><br><span class="line">idna==2.10</span><br><span class="line">lxml==4.6.3</span><br><span class="line">numpy==1.21.0</span><br><span class="line">opencv-python==4.5.2.54</span><br><span class="line">pdf2docx==0.5.2</span><br><span class="line">PyMuPDF==1.16.14</span><br><span class="line">python-docx==0.8.11</span><br></pre></td></tr></table></figure><h4 id="官方代码"><a href="#官方代码" class="headerlink" title="官方代码"></a>官方代码</h4><blockquote><p>示例一</p></blockquote><p>转换整个文档。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from pdf2docx import Converter</span><br><span class="line"></span><br><span class="line">pdf_file = &apos;/path/to/sample.pdf&apos;</span><br><span class="line">docx_file = &apos;path/to/sample.docx&apos;</span><br><span class="line"></span><br><span class="line"># convert pdf to docx</span><br><span class="line">cv = Converter(pdf_file)</span><br><span class="line">cv.convert(docx_file)      # all pages by default</span><br><span class="line">cv.close()</span><br></pre></td></tr></table></figure></p><blockquote><p>示例二</p></blockquote><p>转换文档指定页。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># convert from the second page to the end (by default)</span><br><span class="line">cv.convert(docx_file, start=1)</span><br><span class="line"></span><br><span class="line"># convert from the first page (by default) to the third (end=3, excluded)</span><br><span class="line">cv.convert(docx_file, end=3)</span><br><span class="line"></span><br><span class="line"># convert from the second page and the third</span><br><span class="line">cv.convert(docx_file, start=1, end=3)</span><br></pre></td></tr></table></figure></p><blockquote><p>示例三</p></blockquote><p>多进程转换。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.convert(docx_file, multi_processing=True, cpu_count=4)</span><br></pre></td></tr></table></figure></p><blockquote><p>示例四</p></blockquote><p>加密文档转换。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cv = Converter(pdf_file, password)</span><br><span class="line">cv.convert(docx_file)</span><br><span class="line">cv.close()</span><br></pre></td></tr></table></figure></p><h4 id="参考学习"><a href="#参考学习" class="headerlink" title="参考学习"></a>参考学习</h4><p>官网：<a href="https://dothinking.github.io/pdf2docx/index.html" target="_blank" rel="noopener">https://dothinking.github.io/pdf2docx/index.html</a></p><h4 id="项目转换代码"><a href="#项目转换代码" class="headerlink" title="项目转换代码"></a>项目转换代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">describe:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">base_info:</span><br><span class="line">    __version__ = &quot;v.10&quot;</span><br><span class="line">    __author__ = &quot;mingliang.gao&quot;</span><br><span class="line">    __time__ = &quot;2020/10/1 9:31 AM&quot;</span><br><span class="line">    __mail__ = &quot;gaoming971366@163.com&quot;</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># ------------------------------------------------------------</span><br><span class="line"># usage: /usr/bin/python file_lib.py</span><br><span class="line"># ------------------------------------------------------------</span><br><span class="line">import os</span><br><span class="line">from multiprocessing import cpu_count</span><br><span class="line">from pdf2docx import Converter</span><br><span class="line"></span><br><span class="line">from deploy.utils.utils import get_storefilename_by_md5, \</span><br><span class="line">    get_base_dir, get_now, mk_dirs</span><br><span class="line">from deploy.config import TRANSFER_BASE_DIR</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class FileLib(object):</span><br><span class="line">    ALLOWED_EXTENSIONS = [</span><br><span class="line">        &apos;.doc&apos;,</span><br><span class="line">        &apos;.docx&apos;,</span><br><span class="line">        &apos;.xls&apos;,</span><br><span class="line">        &apos;.xlsx&apos;,</span><br><span class="line">        &apos;.ppt&apos;,</span><br><span class="line">        &apos;.pptx&apos;,</span><br><span class="line">        &apos;.pdf&apos;,</span><br><span class="line">        &apos;.txt&apos;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.cpu_count = cpu_count()</span><br><span class="line"></span><br><span class="line">    def allow_format_fmt(self, fname):</span><br><span class="line">        return True if (os.path.splitext(fname)[1]).lower() in self.ALLOWED_EXTENSIONS else False</span><br><span class="line"></span><br><span class="line">    def store_file(self, file, compress=False, is_md5_store_name=True):</span><br><span class="line">        if not file:</span><br><span class="line">            return False, &#123;&apos;message&apos;: &apos;没有发现文件&apos;&#125;</span><br><span class="line">        try:</span><br><span class="line">            # 文件存储初始化</span><br><span class="line">            now_date = get_now(format=&quot;%Y-%m-%d&quot;)</span><br><span class="line">            real_store_dir = get_base_dir() + TRANSFER_BASE_DIR + now_date</span><br><span class="line">            store_dir = os.path.join(TRANSFER_BASE_DIR + now_date)</span><br><span class="line">            if not os.path.exists(real_store_dir):</span><br><span class="line">                mk_dirs(real_store_dir)</span><br><span class="line"></span><br><span class="line">            file_name = file.filename</span><br><span class="line">            md5_v, store_file_name = get_storefilename_by_md5(file_name, ftype=&apos;file&apos;)</span><br><span class="line">            _real_file = os.path.join(real_store_dir, store_file_name) \</span><br><span class="line">                if is_md5_store_name else os.path.join(real_store_dir, file_name)</span><br><span class="line">            file.save(_real_file)</span><br><span class="line">            # 压缩</span><br><span class="line">            # if compress:</span><br><span class="line">            #     pass</span><br><span class="line">            return True, &#123;&apos;store_name&apos;: store_file_name if is_md5_store_name else file_name,</span><br><span class="line">                          &apos;md5&apos;: md5_v,</span><br><span class="line">                          &apos;path&apos;: os.path.join(store_dir, store_file_name) if is_md5_store_name else os.path.join(store_dir, file_name),</span><br><span class="line">                          &apos;message&apos;: &apos;success&apos;&#125;</span><br><span class="line">        except:</span><br><span class="line">            return False, &#123;&apos;message&apos;: &apos;文件存储发生错误&apos;&#125;</span><br><span class="line"></span><br><span class="line">    def pdf_2_word(self, file_pdf: str, docx_name: str = None,</span><br><span class="line">                   start: int = 0, end: int = None, pages: list = None,</span><br><span class="line">                   is_multi_processing: bool = False, cpu_count: int = 1):</span><br><span class="line">        if not file_pdf:</span><br><span class="line">            return False, &#123;&apos;message&apos;: &apos;Pdf file is null&apos;, &apos;tar_file&apos;: &apos;&apos;&#125;</span><br><span class="line">        src_file = get_base_dir() + file_pdf</span><br><span class="line">        if not os.path.exists(src_file):</span><br><span class="line">            return False, &#123;&apos;message&apos;: &apos;Pdf file is not exist&apos;, &apos;tar_file&apos;: &apos;&apos;&#125;</span><br><span class="line">        if not os.path.isfile(src_file):</span><br><span class="line">            return False, &#123;&apos;message&apos;: &apos;Pdf file is not file&apos;, &apos;tar_file&apos;: &apos;&apos;&#125;</span><br><span class="line">        if docx_name:</span><br><span class="line">            docx_names = os.path.splitext(docx_name)</span><br><span class="line">            if len(docx_names) &lt; 2:</span><br><span class="line">                return False, &#123;&apos;message&apos;: &apos;Pdf file name not have suffix&apos;, &apos;tar_file&apos;: &apos;&apos;&#125;</span><br><span class="line">        src_path, src_name = os.path.split(src_file)</span><br><span class="line">        transfer_name_pdf = docx_name if docx_name else src_name</span><br><span class="line">        transfer_name_word = os.path.splitext(transfer_name_pdf)[0] + &apos;.docx&apos;</span><br><span class="line">        docx_file = os.path.join(src_path, transfer_name_word)</span><br><span class="line">        rel_path = os.path.split(file_pdf)[0]</span><br><span class="line">        tar_file = os.path.join(rel_path, transfer_name_word)</span><br><span class="line">        # convert pdf to docx</span><br><span class="line">        cv = Converter(src_file)</span><br><span class="line">        # all pages by default</span><br><span class="line">        if is_multi_processing and cpu_count &gt;= self.cpu_count:</span><br><span class="line">            cpu_count = self.cpu_count</span><br><span class="line">        cv.convert(docx_file, multi_processing=True, cpu_count=cpu_count) \</span><br><span class="line">            if is_multi_processing else cv.convert(docx_file)</span><br><span class="line">        cv.close()</span><br><span class="line">        return True, &#123;&apos;message&apos;: &apos;success&apos;, &apos;tar_file&apos;: tar_file&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h4&gt;&lt;div class=&quot;note default&quot;&gt;
            &lt;p&gt;利用业余时间参加了公司的创新项目活动，里面有一个PDF转WORD的功能，分享出来。主要使用了python3版本的pdf2docx包，包的使用也很简单，基于基础功能写写逻辑、封装下页面就可以做出web功能了。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label info&quot;&gt;Python实战&lt;/span&gt; &lt;span class=&quot;label default&quot;&gt;PDF转WORD&lt;/span&gt;
    
    </summary>
    
      <category term="Python" scheme="http://pygo2.top/categories/Python/"/>
    
    
      <category term="Python" scheme="http://pygo2.top/tags/Python/"/>
    
      <category term="Python程序篇" scheme="http://pygo2.top/tags/Python%E7%A8%8B%E5%BA%8F%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>Centos7安装python3</title>
    <link href="http://pygo2.top/articles/64746/"/>
    <id>http://pygo2.top/articles/64746/</id>
    <published>2021-06-26T14:00:33.000Z</published>
    <updated>2021-06-26T14:00:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_python3.jpeg" alt></p><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><div class="note primary">            <p>python2已经不维护更新了，不管是DEV开发、还是服务器运行环境，python3推广是迟早的事，学习一下在Centos7系统上安装python3。</p>          </div><a id="more"></a><hr><h4 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h4><table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">name</th><th style="text-align:center">Version</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Centos</td><td style="text-align:center">CentOS Linux release 7.5.1804 (Core)</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Python</td><td style="text-align:center">3.7</td></tr></tbody></table><h4 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h4><blockquote><p>检查</p></blockquote><p>查看目前服务器上的现有版本。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">which python</span><br><span class="line">python --version</span><br></pre></td></tr></table></figure></p><blockquote><p>下载</p></blockquote><p>没有wget的命令的，可以装一下，很有用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># wget安装</span><br><span class="line">yum install wget</span><br><span class="line"></span><br><span class="line"># 下载python3版本</span><br><span class="line">wget https://www.python.org/ftp/python/3.7.11/Python-3.7.11.tgz</span><br></pre></td></tr></table></figure></p><p>可以自由选择python3的版本</p><blockquote><p>解压</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf  Python-3.7.11.tgz</span><br></pre></td></tr></table></figure><blockquote><p>创建编译安装目录</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/python3</span><br></pre></td></tr></table></figure><blockquote><p>编译</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd Python-3.7.11</span><br><span class="line">./configure --prefix=/usr/local/python3</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><blockquote><p>创建软连</p></blockquote><p>因为服务器已经存在一个python的版本了，所以命名为python3进行区分。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python3/bin/python3 /usr/local/bin/python3</span><br><span class="line">ln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3</span><br></pre></td></tr></table></figure></p><blockquote><p>测试</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -V</span><br><span class="line">pip3 -V</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_python3.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;h4 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h4&gt;&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;python2已经不维护更新了，不管是DEV开发、还是服务器运行环境，python3推广是迟早的事，学习一下在Centos7系统上安装python3。&lt;/p&gt;
          &lt;/div&gt;
    
    </summary>
    
      <category term="Python" scheme="http://pygo2.top/categories/Python/"/>
    
    
      <category term="Python" scheme="http://pygo2.top/tags/Python/"/>
    
      <category term="Linux" scheme="http://pygo2.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Pip升级之后No module named &#39;pip._internal&#39;问题解决</title>
    <link href="http://pygo2.top/articles/19559/"/>
    <id>http://pygo2.top/articles/19559/</id>
    <published>2021-06-21T14:56:58.000Z</published>
    <updated>2021-06-21T14:56:58.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_pip.jpeg" alt></p><h4 id="问题起源"><a href="#问题起源" class="headerlink" title="问题起源"></a>问题起源</h4><p>项目使用virtualenv创建虚拟环境，用来做项目的运行环境，发现创建新环境之后，使用pip install 包的时候出现一下错误: <font color="red" size="5">ModuleNotFoundError: No module named ‘pip._internal’</font>。<br>网上查找了很久，记录一下解决的方案。</p><span class="label primary">PIP</span><a id="more"></a><hr><h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>使用python对pip进行升级。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source .venv/bin/activate</span><br><span class="line">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure></p><h4 id="参考学习"><a href="#参考学习" class="headerlink" title="参考学习"></a>参考学习</h4><p>gitub解决讨论：<a href="https://github.com/pypa/pip/issues/5373" target="_blank" rel="noopener">https://github.com/pypa/pip/issues/5373</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_pip.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;h4 id=&quot;问题起源&quot;&gt;&lt;a href=&quot;#问题起源&quot; class=&quot;headerlink&quot; title=&quot;问题起源&quot;&gt;&lt;/a&gt;问题起源&lt;/h4&gt;&lt;p&gt;项目使用virtualenv创建虚拟环境，用来做项目的运行环境，发现创建新环境之后，使用pip install 包的时候出现一下错误: &lt;font color=&quot;red&quot; size=&quot;5&quot;&gt;ModuleNotFoundError: No module named ‘pip._internal’&lt;/font&gt;。&lt;br&gt;网上查找了很久，记录一下解决的方案。&lt;/p&gt;
&lt;span class=&quot;label primary&quot;&gt;PIP&lt;/span&gt;
    
    </summary>
    
      <category term="Python" scheme="http://pygo2.top/categories/Python/"/>
    
    
      <category term="Python" scheme="http://pygo2.top/tags/Python/"/>
    
      <category term="PIP" scheme="http://pygo2.top/tags/PIP/"/>
    
  </entry>
  
  <entry>
    <title>Bootstrap之FileInput的基础学习</title>
    <link href="http://pygo2.top/articles/24956/"/>
    <id>http://pygo2.top/articles/24956/</id>
    <published>2021-06-19T15:45:35.000Z</published>
    <updated>2021-06-19T15:45:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_bootstrap.jpeg" alt></p><div class="note primary">            <p>最近在做一个上传文件的功能，自己写的样式那叫一个难看啊。。。。。上网找了一下，发现有Bootstrap封装好的、而且重要的是还免费的FileInput，拿来用就可以了。</p>          </div><span class="label primary">Bootstrap</span> <span class="label info">FileInput</span><a id="more"></a><hr><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>官网：<a href="https://plugins.krajee.com/file-basic-usage-demo" target="_blank" rel="noopener">https://plugins.krajee.com/file-basic-usage-demo</a><br>中文：<a href="http://www.bootstrap-fileinput.com/examples.html" target="_blank" rel="noopener">http://www.bootstrap-fileinput.com/examples.html</a></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>安装有很多种方式，看<a href="http://www.bootstrap-fileinput.com/" target="_blank" class="block_project_a">中文官网</a>。<br>我直接github上下载的源码文件，直接引用，我使用的是python+flask框架的模板。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/js/fileinput.min.js&apos;) &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/css/fileinput.min.css&apos;) &#125;&#125;&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/themes/fas/theme.min.js&apos;) &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/themes/explorer-fas/theme.min.js&apos;) &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/themes/explorer-fas/theme.min.css&apos;) &#125;&#125;&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(&apos;static&apos;, filename=&apos;plugins/bootstrap-fileinput/js/locales/zh.js&apos;) &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><blockquote><p>HTML代码</p></blockquote><p>我才用了modal+fileinput的方式使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">    &lt;input id=&quot;fileinput_1&quot; type=&quot;file&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><blockquote><p>JS代码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">    $(&apos;[data-toggle=&quot;tooltip&quot;]&apos;).tooltip(); // 也可以使用 $(&apos;#text&apos;).tooltip();</span><br><span class="line"></span><br><span class="line">    // bootstrap fileinput: https://github.com/kartik-v/bootstrap-fileinput</span><br><span class="line">    /* init default, config: http://www.bootstrap-fileinput.com/options.html</span><br><span class="line">    showUpload: true, //是否显示上传按钮</span><br><span class="line">    showCaption: true, //是否显示标题</span><br><span class="line">    showPreview: true, //是否显示文件预览</span><br><span class="line">    showRemove: true, //是否显示删除/清除按钮</span><br><span class="line">    showCancel: true, //是否显示文件上传取消按钮</span><br><span class="line">    showClose: true, //是否显示预览界面的关闭图标</span><br><span class="line">    showUploadedThumbs: true, //否在预览窗口中持续显示已经上传的文件缩略图</span><br><span class="line">    showBrowse: true, //是否显示文件浏览按钮</span><br><span class="line">    dropZoneEnabled: true, //是否显示拖拽区域</span><br><span class="line">    browseOnZoneClick: true, //是否在点击预览区域时触发文件浏览/选择</span><br><span class="line">    uploadClass: &quot;btn btn-primary&quot;, //上传按钮样式</span><br><span class="line">    removeClass: &quot;btn btn-danger&quot;, //移除按钮样式</span><br><span class="line">    maxImageWidth: 1000,//图片的最大宽度</span><br><span class="line">    maxImageHeight: 1000,//图片的最大高度</span><br><span class="line">    minImageWidth: 30, //图片的最小宽度</span><br><span class="line">    minImageHeight: 30, //图片的最小高度</span><br><span class="line">    overwriteInitial: false, // 是否要覆盖初始预览内容和标题设置</span><br><span class="line">    previewFileIconSettings: &#123;</span><br><span class="line">        &apos;doc&apos;: &apos;&lt;i class=&quot;fa fa-file-word-o text-primary&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">        &apos;xls&apos;: &apos;&lt;i class=&quot;fa fa-file-excel-o text-success&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">        &apos;ppt&apos;: &apos;&lt;i class=&quot;fa fa-file-powerpoint-o text-danger&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">        &apos;jpg&apos;: &apos;&lt;i class=&quot;fa fa-file-photo-o text-warning&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">        &apos;pdf&apos;: &apos;&lt;i class=&quot;fa fa-file-pdf-o text-danger&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">        &apos;zip&apos;: &apos;&lt;i class=&quot;fa fa-file-archive-o text-muted&quot;&gt;&lt;/i&gt;&apos;,</span><br><span class="line">    &#125;</span><br><span class="line">    uploadAsync: true,  //bool whether the batch upload of multiple files will be asynchronous/in parallel. Defaults to true.</span><br><span class="line">    */</span><br><span class="line">    // theme: bs5 fa fas gly explorer explorer-fa explorer-fas</span><br><span class="line">    $(&quot;#fileinput_1&quot;).fileinput(&#123;</span><br><span class="line">        theme: &apos;fas&apos;,</span><br><span class="line">        language: &apos;zh&apos;, //设置语言</span><br><span class="line">        uploadUrl: &apos;/common/upload_file/&apos;,  //上传的地址</span><br><span class="line">        uploadAsync: false,</span><br><span class="line">        allowedFileExtensions: [&apos;pdf&apos;],  //允许的文件拓展类型</span><br><span class="line">        browseOnZoneClick: true, //是否在点击预览区域时触发文件浏览/选择</span><br><span class="line">        frameClass: &apos;krajee-default&apos;,</span><br><span class="line">        browseClass: &quot;btn btn-primary&quot;, //按钮样式</span><br><span class="line">        maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小</span><br><span class="line">        minFileCount: 0,</span><br><span class="line">        maxFileCount: 1, //表示允许同时上传的最大文件个数</span><br><span class="line">        enctype: &apos;multipart/form-data&apos;,</span><br><span class="line">        uploadExtraData:function()&#123;</span><br><span class="line">            return &#123;&apos;transfer&apos;: &apos;1&apos;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(&quot;#fileinput_m&quot;).fileinput(&#123;</span><br><span class="line">        theme: &apos;explorer-fas&apos;,</span><br><span class="line">        language: &apos;zh&apos;, //设置语言</span><br><span class="line">        uploadUrl: &apos;/common/upload_file/&apos;,  //上传的地址</span><br><span class="line">        uploadAsync: false,</span><br><span class="line">        allowedFileExtensions: [&apos;pdf&apos;],  //允许的文件拓展类型</span><br><span class="line">        browseOnZoneClick: true, //是否在点击预览区域时触发文件浏览/选择</span><br><span class="line">        frameClass: &apos;krajee-default&apos;,</span><br><span class="line">        browseClass: &quot;btn btn-primary&quot;, //按钮样式</span><br><span class="line">        maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小</span><br><span class="line">        minFileCount: 0,</span><br><span class="line">        enctype: &apos;multipart/form-data&apos;,</span><br><span class="line">        //maxFileCount: 5, //表示允许同时上传的最大文件个数</span><br><span class="line">        hideThumbnailContent: true,</span><br><span class="line">        uploadExtraData:function()&#123;</span><br><span class="line">            return &#123;&apos;transfer&apos;: &apos;1&apos;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 单文件上传监听</span><br><span class="line">$(&apos;#fileinput_1&apos;).on(&apos;fileuploaded&apos;, function(event, data, previewId, index) &#123;</span><br><span class="line">    var status_id = data.response.status_id;</span><br><span class="line">    if (status_id == 100)&#123;</span><br><span class="line">        toastr.success(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else if(200 &lt; status_id &amp;&amp; status_id &lt; 500)&#123;</span><br><span class="line">        toastr.warning(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        toastr.error(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(&apos;#fileinput_1&apos;).on(&apos;filebatchuploadsuccess&apos;, function(event, data, previewId, index) &#123;</span><br><span class="line">    var status_id = data.response.status_id;</span><br><span class="line">    if (status_id == 100)&#123;</span><br><span class="line">        toastr.success(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else if(200 &lt; status_id &amp;&amp; status_id &lt; 500)&#123;</span><br><span class="line">        toastr.warning(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        toastr.error(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 多文件上传监听</span><br><span class="line">$(&apos;#fileinput_m&apos;).on(&apos;fileuploaded&apos;, function(event, data, previewId, index) &#123;</span><br><span class="line">    var status_id = data.response.status_id;</span><br><span class="line">    if (status_id == 100)&#123;</span><br><span class="line">        toastr.success(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else if(200 &lt; status_id &amp;&amp; status_id &lt; 500)&#123;</span><br><span class="line">        toastr.warning(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        toastr.error(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(&apos;#fileinput_m&apos;).on(&apos;filebatchuploadsuccess&apos;, function(event, data, previewId, index) &#123;</span><br><span class="line">    var status_id = data.response.status_id;</span><br><span class="line">    if (status_id == 100)&#123;</span><br><span class="line">        toastr.success(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else if(200 &lt; status_id &amp;&amp; status_id &lt; 500)&#123;</span><br><span class="line">        toastr.warning(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        toastr.error(data.response.msg, &quot;温馨提示：&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 监听fileinput modal关闭重新拉取数据</span><br><span class="line">$(&apos;#fileInputModal&apos;).on(&apos;hidden.bs.modal&apos;, function () &#123;</span><br><span class="line">    draw_table();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(&apos;#manyFileInputModal&apos;).on(&apos;hidden.bs.modal&apos;, function () &#123;</span><br><span class="line">    draw_table();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>后台python</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">view:</span><br><span class="line"></span><br><span class="line">@common.route(&apos;/upload_file/&apos;, methods=[&apos;GET&apos;, &apos;POST&apos;], strict_slashes=False)</span><br><span class="line">def upload_file():</span><br><span class="line">    if request.method == &apos;GET&apos;:</span><br><span class="line">        return Status(</span><br><span class="line">            201,</span><br><span class="line">            &apos;failure&apos;,</span><br><span class="line">            u&apos;upload_file API请求方法错误&apos;,</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        ).json()</span><br><span class="line"></span><br><span class="line">    try:</span><br><span class="line">        files = request.files.getlist(&apos;file_data&apos;)</span><br><span class="line">        res = CommonService().upload_file(files,</span><br><span class="line">                                          transfer=request.values.get(&apos;transfer&apos;),</span><br><span class="line">                                          is_start_fmt=False)</span><br><span class="line">#################################################################################################################################################</span><br><span class="line"># controller:</span><br><span class="line"></span><br><span class="line">def upload_file(self, files, transfer, is_start_fmt=True):</span><br><span class="line">    if not files:</span><br><span class="line">        return Status(</span><br><span class="line">            206,</span><br><span class="line">            &apos;failure&apos;,</span><br><span class="line">            u&apos;没有发现上传文件&apos;,</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        ).json()</span><br><span class="line"></span><br><span class="line">    # check office_transfer</span><br><span class="line">    office_transfer_models = self.enums_bo.get_all_by_name(name=&apos;office_transfer&apos;)</span><br><span class="line">    office_transfers = list()</span><br><span class="line">    for ot in office_transfer_models:</span><br><span class="line">        if not ot or not ot.sub_name: continue</span><br><span class="line">        office_transfers.append(ot.sub_name)</span><br><span class="line">    if transfer not in office_transfers:</span><br><span class="line">        return Status(</span><br><span class="line">            203,</span><br><span class="line">            &apos;failure&apos;,</span><br><span class="line">            u&apos;transfer值参数不合法&apos;,</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        ).json()</span><br><span class="line"></span><br><span class="line">    success_list = list()</span><br><span class="line">    failure_list = list()</span><br><span class="line">    for f in files:</span><br><span class="line">        if not f: continue</span><br><span class="line">        f_name = f.filename</span><br><span class="line">        if is_start_fmt and not self.file_lib.allow_format_fmt(f_name):</span><br><span class="line">            failure_list.append(f_name)</span><br><span class="line">            continue</span><br><span class="line">        is_ok, store_msg = self.file_lib.store_file(f, compress=False, is_md5_store_name=False)</span><br><span class="line">        if not is_ok:</span><br><span class="line">            failure_list.append(f_name)</span><br><span class="line">            continue</span><br><span class="line">        store_msg[&apos;name&apos;] = f_name</span><br><span class="line">        is_to_db = self.__store_file_to_db(store_msg, transfer)</span><br><span class="line">        success_list.append(f_name) if is_to_db else failure_list.append(f_name)</span><br><span class="line">    if files and len(failure_list) == len(files):</span><br><span class="line">        return Status(</span><br><span class="line">            210,</span><br><span class="line">            &apos;failure&apos;,</span><br><span class="line">            u&apos;文件上传失败&apos;,</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        ).json()</span><br><span class="line">    if failure_list:</span><br><span class="line">        return Status(</span><br><span class="line">            303,</span><br><span class="line">            &apos;failure&apos;,</span><br><span class="line">            u&apos;文件上传成功：%s，失败：%s&apos; % (len(success_list), len(failure_list)),</span><br><span class="line">            &#123;&#125;</span><br><span class="line">        ).json()</span><br><span class="line">    return Status(</span><br><span class="line">        100,</span><br><span class="line">        &apos;success&apos;,</span><br><span class="line">        u&apos;文件上传成功&apos;,</span><br><span class="line">        &#123;&#125;</span><br><span class="line">    ).json()</span><br><span class="line"></span><br><span class="line">#################################################################################################################################################</span><br><span class="line"># services:</span><br><span class="line"></span><br><span class="line">def store_file(self, file, compress=False, is_md5_store_name=True):</span><br><span class="line">    if not file:</span><br><span class="line">        return False, &#123;&apos;message&apos;: &apos;没有发现文件&apos;&#125;</span><br><span class="line">    try:</span><br><span class="line">        # 文件存储初始化</span><br><span class="line">        now_date = get_now(format=&quot;%Y-%m-%d&quot;)</span><br><span class="line">        real_store_dir = get_base_dir() + TRANSFER_BASE_DIR + now_date</span><br><span class="line">        store_dir = os.path.join(TRANSFER_BASE_DIR + now_date)</span><br><span class="line">        if not os.path.exists(real_store_dir):</span><br><span class="line">            mk_dirs(real_store_dir)</span><br><span class="line"></span><br><span class="line">        file_name = file.filename</span><br><span class="line">        md5_v, store_file_name = get_storefilename_by_md5(file_name, ftype=&apos;file&apos;)</span><br><span class="line">        _real_file = os.path.join(real_store_dir, store_file_name) \</span><br><span class="line">            if is_md5_store_name else os.path.join(real_store_dir, file_name)</span><br><span class="line">        file.save(_real_file)</span><br><span class="line">        # 压缩</span><br><span class="line">        # if compress:</span><br><span class="line">        #     pass</span><br><span class="line">        return True, &#123;&apos;store_name&apos;: store_file_name if is_md5_store_name else file_name,</span><br><span class="line">                      &apos;md5&apos;: md5_v,</span><br><span class="line">                      &apos;path&apos;: os.path.join(store_dir, store_file_name) if is_md5_store_name else os.path.join(store_dir, file_name),</span><br><span class="line">                      &apos;message&apos;: &apos;success&apos;&#125;</span><br><span class="line">    except:</span><br><span class="line">        return False, &#123;&apos;message&apos;: &apos;文件存储发生错误&apos;&#125;</span><br></pre></td></tr></table></figure><h4 id="参考学习"><a href="#参考学习" class="headerlink" title="参考学习"></a>参考学习</h4><ul><li>中文官网：<a href="http://www.bootstrap-fileinput.com/" target="_blank" rel="noopener">http://www.bootstrap-fileinput.com/</a></li><li>bootstrap-fileinput源码：<a href="https://github.com/kartik-v/bootstrap-fileinput" target="_blank" rel="noopener">https://github.com/kartik-v/bootstrap-fileinput</a></li><li>bootstrap-fileinput在线API：<a href="http://plugins.krajee.com/file-input" target="_blank" rel="noopener">http://plugins.krajee.com/file-input</a></li><li>bootstrap-fileinput Demo展示：<a href="http://plugins.krajee.com/file-basic-usage-demo" target="_blank" rel="noopener">http://plugins.krajee.com/file-basic-usage-demo</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_bootstrap.jpeg&quot; alt&gt;&lt;/p&gt;
&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;最近在做一个上传文件的功能，自己写的样式那叫一个难看啊。。。。。上网找了一下，发现有Bootstrap封装好的、而且重要的是还免费的FileInput，拿来用就可以了。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label primary&quot;&gt;Bootstrap&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;FileInput&lt;/span&gt;
    
    </summary>
    
      <category term="Bootstrap" scheme="http://pygo2.top/categories/Bootstrap/"/>
    
    
      <category term="Bootstrap" scheme="http://pygo2.top/tags/Bootstrap/"/>
    
  </entry>
  
  <entry>
    <title>Brew安装与常用命令</title>
    <link href="http://pygo2.top/articles/12880/"/>
    <id>http://pygo2.top/articles/12880/</id>
    <published>2021-06-14T14:09:08.000Z</published>
    <updated>2021-06-14T14:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_brew.png" alt></p><h4 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h4><div class="note primary">            <p>MacOS系统安装软件使用Brew进行管理，这里主要自己记录一下Brew不常用的命令，方便自己查找与使用。</p>          </div><a id="more"></a><hr><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>item2直接执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</span><br></pre></td></tr></table></figure></p><p>等待执行结果，查看版本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew --version</span><br></pre></td></tr></table></figure></p><p>brew安装软件目录：/usr/local/Cellar</p><h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><blockquote><p>搜索</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search xxx</span><br></pre></td></tr></table></figure><blockquote><p>安装</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install xxxx</span><br></pre></td></tr></table></figure><blockquote><p>卸载</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall xxxx</span><br></pre></td></tr></table></figure><blockquote><p>查询</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew info xxxx</span><br></pre></td></tr></table></figure><p>主要查看具体的软件信息、下载地址、安装依赖、基础信息等等。</p><blockquote><p>更新</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update xxxx</span><br></pre></td></tr></table></figure><blockquote><p>查看安装列表</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew list</span><br></pre></td></tr></table></figure><blockquote><p>检测新版本</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew outdated xxxx</span><br></pre></td></tr></table></figure><blockquote><p>升级</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 升级所有 当然也可以指定升级</span><br><span class="line">brew upgrade</span><br><span class="line"># 升级指定软件</span><br><span class="line">brew upgrade xxxx</span><br></pre></td></tr></table></figure><blockquote><p>打开官网</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew home</span><br></pre></td></tr></table></figure><blockquote><p>清理</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cleanup</span><br></pre></td></tr></table></figure><blockquote><p>更多命令</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man brew</span><br></pre></td></tr></table></figure><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>官网：<a href="https://brew.sh/" target="_blank" rel="noopener">https://brew.sh/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_brew.png&quot; alt&gt;&lt;/p&gt;
&lt;h4 id=&quot;问题背景&quot;&gt;&lt;a href=&quot;#问题背景&quot; class=&quot;headerlink&quot; title=&quot;问题背景&quot;&gt;&lt;/a&gt;问题背景&lt;/h4&gt;&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;MacOS系统安装软件使用Brew进行管理，这里主要自己记录一下Brew不常用的命令，方便自己查找与使用。&lt;/p&gt;
          &lt;/div&gt;
    
    </summary>
    
      <category term="MacOS" scheme="http://pygo2.top/categories/MacOS/"/>
    
    
      <category term="MacOS" scheme="http://pygo2.top/tags/MacOS/"/>
    
      <category term="brew" scheme="http://pygo2.top/tags/brew/"/>
    
  </entry>
  
  <entry>
    <title>DB2自动化全量备份</title>
    <link href="http://pygo2.top/articles/16336/"/>
    <id>http://pygo2.top/articles/16336/</id>
    <published>2021-05-27T14:35:12.000Z</published>
    <updated>2021-05-27T14:35:12.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/article_db2.jpg" alt></p><div class="note primary">            <p>项目上使用的是DB2数据库，全库备份一直是手动备份，自动化的东西没有代码解决不了的问题，初识bat自动化脚本，写的也很简单，分享一下。</p>          </div><span class="label warning">DB2</span> <span class="label default">backup</span> <span class="label info">自动化</span><a id="more"></a><hr><blockquote><p>实现流程</p></blockquote><ul><li>设置执行命令的编码，这个与运行服务器db2cmd的编码保持一致，设置936，如果是windows8、10等设置65001</li><li>备份信息的配置，包含数据库名称、用户、密码、存储目录、日志文件</li><li>存储目录不存在新建、日志文件不存在新建</li><li>db2全库备份</li><li>记录执行结果</li></ul><p>目前实现了基础的备份功能，后续加上彩色打印、自动化删除指定日期前备份文件功能，<font size="6.5" color="red">持续更新中。。。。。。</font></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">:: CMD默认为65001编码，使用db2cmd执行需要设置936</span><br><span class="line">chcp 936</span><br><span class="line">SETLOCAL EnableDelayedExpansion</span><br><span class="line">for /F &quot;tokens=1,2 delims=#&quot; %%a in (&apos;&quot;prompt #$H#$E# &amp; echo on &amp; for %%b in (1) do rem&quot;&apos;) do (</span><br><span class="line">  set &quot;DEL=%%a&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">title DB2 database backup</span><br><span class="line">cls</span><br><span class="line"></span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line">REM + Base info:                                                  +</span><br><span class="line">REM + -- auhtor: mingliang.gao                                    +</span><br><span class="line">REM + -- time: 2021/05/31                                         +</span><br><span class="line">REM + -- version: v1.0.1                                          +</span><br><span class="line">REM + -- system: Windows                                          +</span><br><span class="line">REM + -- desc: DB2 Windows all backup script                      +</span><br><span class="line">REM +                                                             +</span><br><span class="line">REM + Execute method:                                             +</span><br><span class="line">REM + -- auto: db2cmd + task                                      +</span><br><span class="line">REM + -- manual: all path run the script with db2cmd              +</span><br><span class="line">REM +                                                             +</span><br><span class="line">REM + Debug:                                                      +</span><br><span class="line">REM + -- 自定义位置加入pause                                      +</span><br><span class="line">REM +                                                             +</span><br><span class="line">REM + 打印乱问题:                                                 +</span><br><span class="line">REM + -- 1.设置编码与db2cmd编码一致，根据服务器db2cmd编码设定,    +</span><br><span class="line">REM +      db2cmd右键-&gt;属性-&gt;选项中查看编码                       +</span><br><span class="line">REM + -- 2.文件用文本编辑器打开，另存为ANSI编码格式               +</span><br><span class="line">REM +                                                             +</span><br><span class="line">REM + Useage:                                                     +</span><br><span class="line">REM + -- 1.修改chcp编码，以运行服务器db2cmd编码为准               +</span><br><span class="line">REM + -- 2.修改backup config                                      +</span><br><span class="line">REM + -- 3.选择手动或者自动运行方式                               +</span><br><span class="line">REM +                                                             +</span><br><span class="line">REM + Others:                                                     +</span><br><span class="line">REM + -- 1.设置定时任务时，程序选择db2cmd命令，参数选择备份脚本   +</span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line">REM + Backup info:                                                +</span><br><span class="line">REM + -- ip: 16.19.209.67                                         +</span><br><span class="line">REM + -- task: 每周六晚上11点备份                                 +</span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line">REM backup config</span><br><span class="line">set db=mzlpas</span><br><span class="line">set user=pas</span><br><span class="line">set password=pas</span><br><span class="line">set backup_dir=E:\BACKUP_MZLPAS</span><br><span class="line">set backup_log=%backup_dir%\backup.log</span><br><span class="line">REM +-------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">for /f &quot;tokens=1-4 delims=/-\ &quot; %%a in (&apos;date /t&apos;) do (</span><br><span class="line">  set week=%%a</span><br><span class="line">  set year=%%b</span><br><span class="line">  set month=%%c</span><br><span class="line">  set day=%%d</span><br><span class="line">)</span><br><span class="line">set curdate=%year%%month%%day%</span><br><span class="line">echo ========================start backup========================</span><br><span class="line">:: print base informations</span><br><span class="line">echo 当前时间: %date% %time%</span><br><span class="line">call :ColorText 0a &quot;blue&quot;</span><br><span class="line">echo 数据库: %db%</span><br><span class="line">echo 用户: %user%</span><br><span class="line">echo 密码: %password%</span><br><span class="line">echo 备份目录: %backup_dir%</span><br><span class="line">echo 备份日志: %backup_log%</span><br><span class="line"></span><br><span class="line">:: if not exist dir or log file, created</span><br><span class="line">if not exist %backup_dir% (</span><br><span class="line">  mkdir %backup_dir%</span><br><span class="line">)</span><br><span class="line">if not exist %backup_log% (</span><br><span class="line">  echo %db% backup log &gt;&gt; %backup_log%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: backup command</span><br><span class="line">db2 connect to %db% user %user% using %password%</span><br><span class="line">db2 force applications all</span><br><span class="line">db2 backup db %db% to %backup_dir% PARALLELISM 2 COMPRESS</span><br><span class="line"></span><br><span class="line">echo.</span><br><span class="line"></span><br><span class="line">:: record the backup result</span><br><span class="line">if errorlevel 0 (</span><br><span class="line">  echo %curdate%: success</span><br><span class="line">  echo %curdate%: success &gt;&gt; %backup_log%</span><br><span class="line">) else (</span><br><span class="line">  echo %curdate%: failed</span><br><span class="line">  echo %curdate%: failed &gt;&gt; %backup_log%</span><br><span class="line">  exit</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">echo =========================end backup=========================</span><br><span class="line">pause</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/article_db2.jpg&quot; alt&gt;&lt;/p&gt;
&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;项目上使用的是DB2数据库，全库备份一直是手动备份，自动化的东西没有代码解决不了的问题，初识bat自动化脚本，写的也很简单，分享一下。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label warning&quot;&gt;DB2&lt;/span&gt; &lt;span class=&quot;label default&quot;&gt;backup&lt;/span&gt; &lt;span class=&quot;label info&quot;&gt;自动化&lt;/span&gt;
    
    </summary>
    
      <category term="数据库" scheme="http://pygo2.top/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="DB2" scheme="http://pygo2.top/tags/DB2/"/>
    
  </entry>
  
  <entry>
    <title>Win Server服务器EventLog中的6005、6006、6008、6009、6013</title>
    <link href="http://pygo2.top/articles/54459/"/>
    <id>http://pygo2.top/articles/54459/</id>
    <published>2021-05-21T01:05:20.000Z</published>
    <updated>2021-05-21T01:05:20.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><div class="note primary">            <p>早上访问web项目，发现挂掉了，以为是内网网线的问题（本人电脑内外网跳板机），主要有线转换头经常出现问题，但是整了半天依然不行，于是打开服务器一看，什么东西都没了，一看就是重启了，于是需要查找到什么时候重启的，学会了查看系统的EventLog，记录一下用到的6005, 6006, 6008, 6009, 6013。</p>          </div><span class="label info">Windows</span> <span class="label primary">EventLog</span><a id="more"></a><hr><h4 id="功能查询"><a href="#功能查询" class="headerlink" title="功能查询"></a>功能查询</h4><p>查看系统的日志记录，查询服务器发生了哪些明细，所在位置：</p><font size="5.5" color="blue">我的电脑 &gt; 管理 &gt; 服务管理器  &gt;  诊断 &gt;  事件查看器 &gt; windows日期 &gt; 系统</font><p><img src="eventlog.png" alt></p><p>主要功能说明：</p><ul><li>目录：EventLog所在的功能树</li><li>事件日志：服务器的事件日志历史记录</li><li>事件明细：对于历史记录的详细说明</li><li>功能区：对EventLog的常用功能，主要用到筛选当前日志</li></ul><p>点击上面的历史事件，可以在明细区域查看具体情况。</p><h4 id="筛选功能"><a href="#筛选功能" class="headerlink" title="筛选功能"></a>筛选功能</h4><p>利用筛选功能选出需要的日志，主要有3大筛选条件：</p><ul><li>记录时间：可以选取近1h、12h、24h、7天、30天</li><li>事件来源：选取eventlog、Eventlog</li><li>事件ID：输入需要过滤的事件ID</li></ul><p><img src="query.png" alt></p><h4 id="EventLog-ID"><a href="#EventLog-ID" class="headerlink" title="EventLog ID"></a>EventLog ID</h4><table><thead><tr><th style="text-align:center">ID</th><th style="text-align:center">level ｜ describe</th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:center">6005</td><td style="text-align:center">信息</td><td style="text-align:left">事件服务日期启动（开机）</td></tr><tr><td style="text-align:center">6006</td><td style="text-align:center">信息</td><td style="text-align:left">事件服务日期关闭（关机）</td></tr><tr><td style="text-align:center">6008</td><td style="text-align:center">错误</td><td style="text-align:left">上一次系统的 4:12:37 在 ?2021/?5/?21 上的关闭是意外的（记录系统意外关机事件）</td></tr><tr><td style="text-align:center">6009</td><td style="text-align:center">信息</td><td style="text-align:left">Microsoft (R) Windows (R) 6.01. 7601 Service Pack 1 Multiprocessor Free（服务器开机的一些信息）</td></tr><tr><td style="text-align:center">60013</td><td style="text-align:center">信息</td><td style="text-align:left">记录操作系统运行了多久时间，24h运行一次</td></tr></tbody></table><p>破案了，原来是断电了，服务器来电后自己又自己起来了，但是服务全没了。</p><font size="6.5" color="red">记录遇到的各种Eventlog ID，持续更新中。。。。。。</font>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h4&gt;&lt;div class=&quot;note primary&quot;&gt;
            &lt;p&gt;早上访问web项目，发现挂掉了，以为是内网网线的问题（本人电脑内外网跳板机），主要有线转换头经常出现问题，但是整了半天依然不行，于是打开服务器一看，什么东西都没了，一看就是重启了，于是需要查找到什么时候重启的，学会了查看系统的EventLog，记录一下用到的6005, 6006, 6008, 6009, 6013。&lt;/p&gt;
          &lt;/div&gt;
&lt;span class=&quot;label info&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;label primary&quot;&gt;EventLog&lt;/span&gt;
    
    </summary>
    
      <category term="Windows" scheme="http://pygo2.top/categories/Windows/"/>
    
    
      <category term="Windows" scheme="http://pygo2.top/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>FreeFileSync探索</title>
    <link href="http://pygo2.top/articles/15964/"/>
    <id>http://pygo2.top/articles/15964/</id>
    <published>2021-05-10T14:07:54.000Z</published>
    <updated>2021-05-10T14:07:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>一款备份软件可以运行在win、macos、linux上的文件备份软件。</p><p>官网：<a href="https://freefilesync.org/" target="_blank" rel="noopener">https://freefilesync.org/</a></p><font size="6.5" color="red">有兴趣或者需要的同学可以详细研究一下。。。。。。</font><a id="more"></a><hr><div class="note primary">            <p>Synchronize Files and Folders<br>Key featuresFreeFileSync is a folder comparison and synchronization software that creates and manages backup copies of all your important files. Instead of copying every file every time, FreeFileSync determines the differences between a source and a target folder and transfers only the minimum amount of data needed. FreeFileSync is Open Source software, available for Windows, macOS, and Linux.</p>          </div>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一款备份软件可以运行在win、macos、linux上的文件备份软件。&lt;/p&gt;
&lt;p&gt;官网：&lt;a href=&quot;https://freefilesync.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://freefilesync.org/&lt;/a&gt;&lt;/p&gt;
&lt;font size=&quot;6.5&quot; color=&quot;red&quot;&gt;有兴趣或者需要的同学可以详细研究一下。。。。。。&lt;/font&gt;
    
    </summary>
    
      <category term="工具集" scheme="http://pygo2.top/categories/%E5%B7%A5%E5%85%B7%E9%9B%86/"/>
    
    
      <category term="FreeFileSync" scheme="http://pygo2.top/tags/FreeFileSync/"/>
    
  </entry>
  
</feed>
